# Final Project: Валютный кошелёк

## Описание

Консольное приложение для управления виртуальным портфелем фиатных и криптовалют. Позволяет регистрировать пользователей, покупать/продавать валюты по актуальным курсам и отслеживать состояние портфеля.

## Статус проекта

**Реализовано:**

- Базовые классы (User, Wallet, Portfolio) с валидацией
- Полная бизнес-логика операций покупки/продажи
- CLI интерфейс со всеми командами из ТЗ
- Файловая сессия для сохранения состояния между вызовами
- Хранение данных в JSON файлах
- Начальный баланс 1000 USD при регистрации
- Автоматическое списание/начисление USD при операциях

## Структура проекта

finalproject_Kolesnik_M25-555/
├── valutatrade_hub/ # Основной пакет
│ ├── core/
│ │ ├── models.py # Классы User, Wallet, Portfolio
│ │ ├── utils.py # Работа с JSON, валидация, сессии
│ │ └── usecases.py # Бизнес-логика
│ └── cli/
│ └── interface.py # CLI интерфейс (аргументы команд)
├── data/ # Хранение данных
│ ├── users.json # Пользователи
│ ├── portfolios.json # Портфели
│ ├── rates.json # Курсы валют
│ └── session.json # Текущая сессия (автоматически)
├── main.py # Точка входа
├── Makefile # Автоматизация
├── pyproject.toml # Конфигурация Poetry
└── README.md # Документация

## Установка

```bash
# Установка зависимостей через Poetry
make install

# Альтернативно:
poetry install
Использование
Быстрый старт

Подробное описание команд
1. Регистрация нового пользователя
poetry run project register --username alice --password 1234
Создает пользователя с начальным балансом 1000 USD
Пароль должен быть не короче 4 символов
Имя пользователя должно быть уникальным

2. Вход в систему
poetry run project login --username alice --password 1234
Создает сессию в data/session.json
После входа можно выполнять команды без повторной аутентификации
Сессия сохраняется между вызовами и перезапусками терминала

3. Просмотр портфеля
poetry run project show-portfolio
poetry run project show-portfolio --base EUR  # Отображение в евро
Показывает все валюты и их балансы
Конвертирует общую стоимость в выбранную валюту
Рассчитывает стоимость каждой валюты по текущим курсам

4. Покупка валюты
poetry run project buy --currency BTC --amount 0.01
Автоматически списывает USD по текущему курсу
Если валюты нет в портфеле - создается новый кошелек
Проверяет достаточность средств на USD кошельке

5. Продажа валюты
poetry run project sell --currency BTC --amount 0.005
Автоматически начисляет USD по текущему курсу
Проверяет достаточность продаваемой валюты
Если продается вся валюта - кошелек остается с нулевым балансом

6. Получение курса валют
poetry run project get-rate --from USD --to BTC
poetry run project get-rate --from EUR --to USD
Показывает прямой и обратный курс
Использует актуальные данные из data/rates.json
При отсутствии данных использует расчетные курсы

7. Управление сессией
poetry run project whoami      # Показать текущего пользователя
poetry run project logout      # Выйти из системы (удалить сессию)
Пример рабочего сеанса
# 1. Регистрация нового пользователя
poetry run project register --username trader --password trade123
# 2. Вход в систему
poetry run project login --username trader --password trade123
# 3. Проверка начального баланса
poetry run project show-portfolio
# Вывод: USD: 1000.00

# 4. Узнать текущий курс BTC
poetry run project get-rate --from USD --to BTC

# 5. Купить биткоины
poetry run project buy --currency BTC --amount 0.02

# 6. Проверить изменения в портфеле
poetry run project show-portfolio
# Вывод: USD: ~406.63, BTC: 0.02

# 7. Продать часть биткоинов
poetry run project sell --currency BTC --amount 0.01

# 8. Выйти из системы
poetry run project logout
Поддерживаемые валюты
Код -> Валюта -> Тип -> Пример курса к USD
USD -> Доллар США -> Фиатная -> 1.00 (базовая)
EUR -> Евро -> Фиатная -> ~1.0786
BTC -> Биткоин -> Криптовалюта -> ~59337.21
ETH -> Эфириум -> Криптовалюта -> ~3720.00
RUB -> Российский рубль -> Фиатная -> ~0.01016
Особенности реализации
Безопасность: Пароли хранятся в виде хешей SHA256 с уникальной солью
Надежность: Все операции атомарно сохраняются в JSON файлы
Удобство: Сессия сохраняется между вызовами команд
Расширяемость: Легко добавить новые валюты через data/rates.json
Валидация: Проверка всех входных данных (суммы, коды валют, пароли)

Разработка
make install     # Установить зависимости
make project     # Запустить приложение (показать справку)
make build       # Собрать пакет для публикации
make lint        # Проверить код (Ruff)
make publish     # Тестовая публикация (dry-run)
Технологии
Python 3.12+ - основной язык

Poetry - управление зависимостями и сборка

argparse - парсинг аргументов командной строки

PrettyTable (зависимость) - форматированный вывод таблиц

Ruff - линтинг и форматирование кода

JSON - хранение данных (пользователи, портфели, курсы, сессии)

Лицензия

MIT
